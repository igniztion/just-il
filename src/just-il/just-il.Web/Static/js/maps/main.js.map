{"version":3,"sources":["main.js"],"names":["$","document","on","Lazy","effect","effectTime","getLightboxSettings","selector","itemSelector","src","closeOnBackdropClick","lazy","caption","el","index","$el","items","length","Array","data","pinterest","tags","shareLabel","downloadId","lightboxEvents","lb","show.slickLightbox","each","this","$img","find","shareContainer","addClass","tagsContainer","attr","css","opacity","lazySrc","decodeURIComponent","indexOf","animate","i","pinterestLink","append","id","downloadButton","tagsList","tag","html","remove","shown.slickLightbox","hide.slickLightbox","$grid","masonry","ua","window","navigator","userAgent","msie","parseInt","substring","rv","edge","ver","detectIE","height","bottom","item","get","$item","itemBottom","position","top","outerHeight","preselectedImageID","imageID","afterLoad","$element","trigger","slickLightbox","slick","closest","click","toggleClass","removeClass"],"mappings":"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","file":"../main.js","sourcesContent":["$(document).on(\"ready\", function () {\r\n\r\n    function detectIE() {\r\n        var ua = window.navigator.userAgent;\r\n\r\n        var msie = ua.indexOf('MSIE ');\r\n        if (msie > 0) {\r\n            // IE 10 or older => return version number\r\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n        }\r\n\r\n        var trident = ua.indexOf('Trident/');\r\n        if (trident > 0) {\r\n            // IE 11 => return version number\r\n            var rv = ua.indexOf('rv:');\r\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n        }\r\n\r\n        var edge = ua.indexOf(\"Edge/\");\r\n        if (edge > 0) {\r\n            var ver = ua.substring(edge + 5, ua.indexOf('.', edge), 10);\r\n            return parseInt(ver);\r\n        }\r\n\r\n        // other browser\r\n        return -1;\r\n    };\r\n\r\n    $(\".lazy\").Lazy({\r\n        effect: 'fadeIn',\r\n        effectTime: 400/*,\r\n        afterLoad: function (element) {\r\n            var $img = $(element);\r\n            if (!!$img.data(\"fade\")) {\r\n                $($img.data(\"fade\")).animate({ opacity: 1 }, 200);\r\n            }\r\n        }*/\r\n    });/*.each(function (index, el) {\r\n        var $img = $(el);\r\n        if (!!$img.data(\"fade\")) {\r\n            $($img.data(\"fade\")).css({ opacity: 0 });\r\n        }\r\n    });*/\r\n\r\n    var items = [];\r\n\r\n    var lazyLoad = true;\r\n\r\n    var isPresentingLightbox = false;\r\n\r\n    var getLightboxSettings = function (selector) {\r\n        return {\r\n            itemSelector: selector,\r\n            src: 'data-fullsize',\r\n            closeOnBackdropClick: false,\r\n            lazy: true,\r\n            caption: function (el, index) {\r\n                var $el = $(el);\r\n                if (!items.length) {\r\n                    items = new Array(index.length);\r\n                }\r\n                items[index.index] =\r\n                    {\r\n                        src: $el.data(\"fullsize\"),\r\n                        pinterest: $el.data(\"pinterest\"),\r\n                        tags: $el.data(\"tags\"),\r\n                        shareLabel: $el.data(\"share-label\"),\r\n                        downloadId: $el.data(\"download-id\")\r\n                    };\r\n                return \"\";\r\n            }\r\n        };\r\n    };\r\n\r\n    var lightboxEvents = function (lb) {\r\n        return {\r\n            'show.slickLightbox': function () {\r\n                isPresentingLightbox = true;\r\n                $(\".slick-lightbox-slick-item-inner\").each(function () {\r\n                    var $el = $(this);\r\n                    var $img = $el.find(\"img\");\r\n                    var shareContainer = $('<div/>').addClass(\"gallery-item-actions\");\r\n                    var tagsContainer = $('<div/>').addClass(\"gallery-item-tags-container\");\r\n                    var src = \"\";\r\n                    if (!!$img.data(\"lazy\")) {\r\n                        src = $img.data(\"lazy\");\r\n                    } else {\r\n                        src = $img.attr(\"src\");\r\n                    }\r\n                    shareContainer.css({ opacity: 0 });\r\n                    tagsContainer.css({ opacity: 0 });\r\n                    $img.on(\"load\", function () {\r\n                        var lazySrc = decodeURIComponent($(this).data(\"lazy\") || \"\");\r\n                        var src = decodeURIComponent(this.src);\r\n                        if (!lazySrc || src.indexOf(lazySrc) >= 0) {\r\n                            shareContainer.animate({ opacity: 1 }, 200);\r\n                            tagsContainer.animate({ opacity: 1 }, 200);\r\n                        }\r\n                    });\r\n                    var data = items.find(function (i) { return i.src == src });\r\n                    if (!!data) {\r\n                        if (!!data.pinterest || !!data.downloadId) {\r\n                            if (!!data.pinterest) {\r\n                                var pinterestLink = $('<a/>').attr(\"href\", data.pinterest).addClass(\"share-pinterest\");\r\n                                shareContainer = shareContainer.append(pinterestLink);\r\n                            }\r\n                            if (!!data.downloadId) {\r\n                                var id = data.downloadId;\r\n                                var downloadButton = $('<a/>').addClass(\"btn\").addClass(\"btn-icon\").addClass(\"gallery-download\").attr(\"href\", \"/download/\" + id);\r\n                                shareContainer = shareContainer.append(downloadButton);\r\n                            }\r\n                            $el.append(shareContainer);\r\n                        }\r\n                        if (!!data.tags.length) {\r\n                            var tagsList = $('<ul/>').addClass(\"gallery-item-tags\");\r\n                            for (var i = 0; i < data.tags.length; i++) {\r\n                                var tag = $('<li/>').html(data.tags[i]);\r\n                                tagsList.append(tag);\r\n                            }\r\n                            tagsContainer.append(tagsList);\r\n                            $el.append(tagsContainer);\r\n                        }\r\n\r\n                    }\r\n                });\r\n                $(\".slick-lightbox-slick-caption\").remove();\r\n            },\r\n            'shown.slickLightbox': function () {\r\n                isPresentingLightbox = false;\r\n            },\r\n            'hide.slickLightbox': function () {\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    var $grid = $(\".gallery-grid\").masonry({ itemSelector: '.gallery-image' });\r\n    if (detectIE() > 6) {\r\n        var fixGridLayout = function () {\r\n            var items = $grid.find(\".gallery-image\");\r\n            var height = $grid.height();\r\n            var bottom = -1;\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = items.get(i);\r\n                var $item = $(item);\r\n                var itemBottom = $item.position().top + $item.outerHeight();\r\n                if (itemBottom > bottom) {\r\n                    bottom = itemBottom;\r\n                }\r\n            }\r\n            if (bottom > height) {\r\n                $grid.height(height);\r\n            }\r\n        };\r\n        $grid.on('layoutComplete', fixGridLayout);\r\n        $(window).on('scroll', function () {\r\n            $grid.masonry('layout');\r\n        });\r\n    }\r\n    var preselectedImageID = window.imageID || 0;\r\n    if (!!lazyLoad) {\r\n        window.imageID = 0;\r\n        $(\".gallery-grid\").find(\".gallery-image > img\").Lazy({\r\n            effect: 'fadeIn',\r\n            effectTime: 400,\r\n            afterLoad: function ($element) {\r\n                $grid.masonry('layout');\r\n                if ($element.data(\"id\") == preselectedImageID) {\r\n                    $element.trigger(\"click\");\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        $grid.imagesLoaded().progress(function () {\r\n            $grid.masonry('layout');\r\n        });\r\n    }\r\n\r\n    var gridLB = $(\".gallery-grid\").slickLightbox(getLightboxSettings('> .gallery-image > img'));\r\n    gridLB.on(lightboxEvents(gridLB));\r\n\r\n    /*\r\n    var projectsLB = $(\".grid-projects\").slickLightbox(getLightboxSettings(\"li > .link-block > .item-image-wrap > img\"));\r\n    projectsLB.on(lightboxEvents(projectsLB));*/\r\n\r\n    $(\".gallery-carousel\").slick();\r\n    var carouselLB = $(\".gallery-carousel\").slickLightbox(getLightboxSettings('li > .gallery-image > img'));\r\n    carouselLB.on(lightboxEvents(carouselLB));\r\n\r\n    if (!!window.imageID) {\r\n        $('.gallery-item-image[data-id=\"' + preselectedImageID + '\"]').trigger(\"click\");\r\n    }\r\n\r\n    $(\".gallery-image-infobtn\").on(\"click\", function () {\r\n        $(this).closest(\".gallery-image\").find(\"img\").trigger(\"click\");\r\n    });\r\n\r\n});\r\n\n$(function() {\r\n\r\n\t// MAIN NAV ON DEVICES\r\n\t$(\".btn-nav-toggle\").click(function() {\r\n\t\t$(\"body\").toggleClass(\"menu-open\");\r\n\t\t$(this).toggleClass(\"open\");\r\n\t\t$(\".nav-main-device-panel\").toggleClass(\"open\");\r\n\t});\r\n\r\n\t$(\".nav-main-device-panel .nav-link\").click(function() {\r\n\t\t$(\"body.menu-open\").removeClass(\"menu-open\");\r\n\t\t$(\"#navMainToggle.open\").removeClass(\"open\");\r\n\t\t$(\".nav-main-device-panel.open\").removeClass(\"open\");\r\n\t});\r\n\r\n\t$(\"#\")\r\n\r\n});\r\n"]}